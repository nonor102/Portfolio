<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pick & See - nonor102 Portfolio</title>
    <link rel="stylesheet" href="../css/detail.css">
</head>
<body>
    <nav class="detail-nav">
        <div class="container">
            <a href="../index.html" class="logo">nonor102</a>
            <a href="../index.html#works" class="back-link">â† Works ã«æˆ»ã‚‹</a>
        </div>
    </nav>

    <section class="detail-hero">
        <div class="container">
            <h1>Pick & See</h1>
            <p class="subtitle">ARã‚’æ´»ç”¨ã—ãŸç’°å¢ƒå•é¡Œå•“ç™º3Dã‚²ãƒ¼ãƒ  â€• é«˜å°‚ãƒ—ãƒ­ã‚³ãƒ³å‡ºå ´ä½œå“</p>
            <div class="tags">
                <span class="tag">Unity</span>
                <span class="tag">C#</span>
                <span class="tag">3D</span>
                <span class="tag">AR</span>
                <span class="tag">Firebase</span>
                <span class="tag">ãƒãƒ¼ãƒ é–‹ç™º</span>
            </div>
        </div>
    </section>

    <section class="detail-content">
        <div class="container">
            <div class="detail-grid">
                <!-- å·¦: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚®ãƒ£ãƒ©ãƒªãƒ¼ -->
                <div class="detail-gallery">
                    <div class="gallery-main">
                        <img id="mainImage" src="../img/PickSee/title.png" alt="Pick & See ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢">
                    </div>
                    <div class="gallery-thumbs">
                        <img src="../img/PickSee/title.png" alt="ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢" class="active" onclick="changeImage(this)">
                        <img src="../img/PickSee/login.png" alt="ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢" onclick="changeImage(this)">
                        <img src="../img/PickSee/register.png" alt="ç™»éŒ²ç”»é¢" onclick="changeImage(this)">
                        <img src="../img/PickSee/maingame.png" alt="ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ç”»é¢" onclick="changeImage(this)">
                    </div>
                </div>

                <!-- å³: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ± -->
                <div class="detail-info">
                    <div class="info-section">
                        <h2>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦</h2>
                        <div class="project-meta">
                            <span class="meta-label">ã‚¸ãƒ£ãƒ³ãƒ«</span>
                            <span class="meta-value">è‚²æˆã‚²ãƒ¼ãƒ  / AR</span>
                            <span class="meta-label">é–‹ç™ºç’°å¢ƒ</span>
                            <span class="meta-value">Unity / C# / Firebase</span>
                            <span class="meta-label">ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ </span>
                            <span class="meta-value">ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³(Android)</span>
                            <span class="meta-label">é–‹ç™ºäººæ•°</span>
                            <span class="meta-value">4äºº (ãƒãƒ¼ãƒ é–‹ç™º) </span>
                            <span class="meta-label">å¤§ä¼š</span>
                            <span class="meta-value">é«˜å°‚ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚³ãƒ³ãƒ†ã‚¹ãƒˆ ç¬¬36å›æ¾æ±Ÿå¤§ä¼š èª²é¡Œéƒ¨é–€</span>
                        </div>
                    </div>

                    <div class="info-section">
                        <h2>ä¸»ãªç‰¹å¾´</h2>
                        <ul class="features-list">
                            <li>ç’°å¢ƒå•é¡Œã¸ã®æ„è­˜å‘ä¸Šã‚’ç›®çš„ã¨ã—ãŸæ•™è‚²çš„ã‚²ãƒ¼ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³</li>
                            <li>ARæŠ€è¡“ã‚’æ´»ç”¨ã—ã€ç¾å®Ÿç©ºé–“ã®ã”ã¿ã‚’å‡¦åˆ†ã™ã‚‹ã¨ã‚²ãƒ¼ãƒ ãŒç™ºå±•ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ </li>
                            <li>ã€Œå³¶ã€ã®ç™ºå±•ã‚’è»¸ã«ã—ãŸè‚²æˆã‚²ãƒ¼ãƒ é¢¨ã®ã‚²ãƒ¼ãƒ ã‚µã‚¤ã‚¯ãƒ«</li>
                            <li>Firebaseã‚’æ´»ç”¨ã—ãŸãƒ¦ãƒ¼ã‚¶èªè¨¼ (ãƒ­ã‚°ã‚ªãƒ³ / ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½) </li>
                            <li>4äººãƒãƒ¼ãƒ ã§ã®å…±åŒé–‹ç™ºã«ã‚ˆã‚‹Gitã‚’ç”¨ã„ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†</li>
                        </ul>
                    </div>

                    <div class="detail-actions">
                        <a href="https://github.com/maguro256/procon" target="_blank" class="detail-btn-primary">GitHub ã§è¦‹ã‚‹</a>
                        <!-- <a href="#" class="detail-btn-secondary">ãƒ‡ãƒ¢ã‚’è©¦ã™</a> -->
                    </div>
                </div>
            </div>

            <!-- è©³ç´°èª¬æ˜ -->
            <div class="detail-full-section">
                <h2>ä½œå“ã«ã¤ã„ã¦</h2>
                <p>
                    Pick & Seeã¯ã€é«˜å°‚ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚³ãƒ³ãƒ†ã‚¹ãƒˆ ç¬¬36å›æ¾æ±Ÿå¤§ä¼š èª²é¡Œéƒ¨é–€ã«å‡ºå ´ã™ã‚‹ãŸã‚ã«4äººãƒãƒ¼ãƒ ã§å…±åŒé–‹ç™ºã—ãŸ3Dã‚²ãƒ¼ãƒ ã§ã™ã€‚
                    Unityã¨C#ã€ãã—ã¦ARæŠ€è¡“ã‚’çµ„ã¿åˆã‚ã›ã¦é–‹ç™ºã—ã¾ã—ãŸã€‚
                </p>
                <p>
                    ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã‚²ãƒ¼ãƒ ãŒèº«è¿‘ãªå­˜åœ¨ã§ã‚ã‚‹ç”Ÿå¾’ã‚„å­¦ç”Ÿé”ã®ç’°å¢ƒå•é¡Œã¸ã®æ„è­˜å‘ä¸Šã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚
                    ã‚²ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ ã¯ã€Œè‡ªèº«ã®ã€å³¶ã€ã®ç™ºå±•ã€ã¨ã„ã†è‚²æˆã‚²ãƒ¼ãƒ è¦ç´ ã‚’ä¸­å¿ƒã«è¨­è¨ˆã—ã¦ãŠã‚Šã€
                    ãƒ—ãƒ¬ã‚¤ã‚’é€šã—ã¦è‡ªç„¶ã¨ç’°å¢ƒå•é¡Œã«ã¤ã„ã¦è€ƒãˆã‚‹ãã£ã‹ã‘ã‚’æä¾›ã—ã¾ã™ã€‚
                </p>
                <p>
                    ç’°å¢ƒå•é¡Œã¸ã®å–ã‚Šçµ„ã¿ã¨ã—ã¦ã€ãƒã‚¤æ¨ã¦ã•ã‚Œã¦ã„ã‚‹ã”ã¿ã«ç€ç›®ã—ã¾ã—ãŸã€‚
                    ãƒ¦ãƒ¼ã‚¶ã¯ç¾å®Ÿä¸–ç•Œã®ã”ã¿ã®å†™çœŸã‚’æŠ•ç¨¿ã—ã€ARç©ºé–“ä¸Šã«è‡ªåˆ†ã®å¥½ããªã‚¢ã‚¤ãƒ†ãƒ ã‚’ç½®ãã“ã¨ãŒã§ãã¾ã™ã€‚
                    ä»–äººã¯ãã®å ´æ‰€ã§ARç©ºé–“ä¸Šã«ã‚ã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã¨ã”ã¿ã®å†™çœŸã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã€ç½®ã„ã¦ã‚ã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã‚’è‡ªåˆ†ã®å³¶ã«æŒã¡å¸°ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
                    ç¾å®Ÿä¸–ç•Œã§ã®ã”ã¿æ‹¾ã„ãŒã‚²ãƒ¼ãƒ ã®é€²è¡Œã«ã¤ãªãŒã‚‹ã¨ã„ã†ä»•çµ„ã¿ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚
                </p>
                <p>
                    ã”ã¿æ‹¾ã„ã ã‘ã§ã¯ãªãã€ã‚‚ã£ã¨æ·±ãç’°å¢ƒå•é¡Œã«ã¤ã„ã¦çŸ¥è­˜ã‚’å¢—ã‚„ã—ã¦ã»ã—ã„ã¨è€ƒãˆã€ã‚²ãƒ¼ãƒ å†…ã«ã¯è‡ªèº«ã®ç’°å¢ƒçš„ãªè¡Œå‹•ã«é–¢ã™ã‚‹ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’è¨­ã‘ã¾ã—ãŸã€‚
                    ãƒŸãƒƒã‚·ãƒ§ãƒ³ã«ã¯ã€Œä»Šæ—¥ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ã€ã€ã€Œä»Šé€±ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ã€ã¨ã—ã¦ãã‚Œãã‚Œ6ã¤ãšã¤ç”¨æ„ã—ã¾ã—ãŸã€‚
                    ã€Œä»Šæ—¥ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ã€ã§ã¯ã€1æ—¥ã®ã†ã¡ã«é”æˆã§ãã‚‹ã‚ˆã†ãªç°¡å˜ãªå†…å®¹ã‚’ã€ã€Œä»Šé€±ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ã€ã§ã¯ã€1é€±é–“ã‹ã‘ã¦é”æˆã™ã‚‹ã‚ˆã†ãªå°‘ã—é›£ã—ã„å†…å®¹ã‚’è¨­å®šã—ã¾ã—ãŸã€‚
                    ã“ã‚Œã‚‰ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ã«ã¯å€‹åˆ¥ã«ãƒã‚¤ãƒ³ãƒˆãŒå‰²ã‚ŠæŒ¯ã‚‰ã‚Œã¦ãŠã‚Šã€ã“ã®ãƒã‚¤ãƒ³ãƒˆã‚’é›†ã‚ã‚‹ã“ã¨ã§å³¶ã®ç™ºå±•ã«å¿…è¦ãªã‚¢ã‚¤ãƒ†ãƒ ã‚’ç²å¾—ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚
                </p>
                <p>
                    ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ã¯Firebaseã‚’åˆ©ç”¨ã—ã€ãƒ¦ãƒ¼ã‚¶ã®ãƒ­ã‚°ã‚ªãƒ³ãƒ»ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ã‚„ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã‚’è¡Œã„ã¾ã—ãŸã€‚
                    ãƒãƒ¼ãƒ é–‹ç™ºã§ã¯Gitã¨GitHubã‚’æ´»ç”¨ã—ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚’è¡Œã„ã€åŠ¹ç‡çš„ãªé–‹ç™ºä½“åˆ¶ã‚’å®Ÿç¾ã—ã¾ã—ãŸã€‚
                </p>

                <h2>è‡ªåˆ†ã®æ‹…å½“ã—ãŸéƒ¨åˆ†</h2>
                <p>
                    ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€Firebaseã§ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†ã¨ã¨ã‚‚ã«ã€ãƒ­ã‚°ã‚¤ãƒ³/æ–°è¦ç™»éŒ²ç”»é¢ã®ä½œè£½ã‚’ä¸»ã«è¡Œã„ã¾ã—ãŸã€‚
                    ãƒ¦ãƒ¼ã‚¶ãŒå®‰å…¨ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆãƒ»ç®¡ç†ã§ãã‚‹ã‚ˆã†ã€Firebase Authentication ã‚’æ´»ç”¨ã—ãŸèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚
                    ã¾ãŸã€ãƒ­ã‚°ã‚¤ãƒ³/æ–°è¦ç™»éŒ²ç”»é¢ã®UIã®è¨­è¨ˆã‹ã‚‰å®Ÿè£…ã¾ã§ä¸€è²«ã—ã¦æ‹…å½“ã—ã€ç›´æ„Ÿçš„ã§ä½¿ã„ã‚„ã™ã„ãƒ­ã‚°ã‚¤ãƒ³ä½“é¨“ã‚’æä¾›ã™ã‚‹ã“ã¨ã«ã“ã ã‚ã‚Šã¾ã—ãŸã€‚
                </p>
                <p>
                    ãƒ¦ãƒ¼ã‚¶ã®æƒ…å ±ã®ç®¡ç†(å³¶ã®æƒ…å ±ã‚„ãƒŸãƒƒã‚·ãƒ§ãƒ³ã®é”æˆçŠ¶æ³ãªã©)ã‚‚Firebase Firestoreã‚’ç”¨ã„ã¦å®Ÿè£…ã—ã¾ã—ãŸã€‚
                    ãƒ¦ãƒ¼ã‚¶ãŒã‚¢ã‚¤ãƒ†ãƒ ã®é…ç½®ãªã©ã®æ“ä½œã‚’ã™ã‚‹ãŸã³ã«ã€Firestoreã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€ã‚²ãƒ¼ãƒ å†…ã§ã®é€²è¡ŒçŠ¶æ³ã‚„å³¶ã®çŠ¶æ…‹ã‚’åæ˜ ã•ã›ã‚‹ä»•çµ„ã¿ã‚’æ§‹ç¯‰ã—ã¾ã—ãŸã€‚
                </p>
            </div>

            <!-- ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ç´¹ä»‹ -->
            <div class="code-showcase">
                <h2>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ç´¹ä»‹</h2>

                <!-- ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ 1 -->
                <div class="code-block-wrapper">
                    <div class="code-block-header" onclick="toggleCodeBlock(event)">
                        <div class="code-block-toggle">
                            <span class="code-toggle-icon">â–¼</span>
                            <span class="filename">AuthenticationManager.cs</span>
                        </div>
                        <span class="language-badge">C#</span>
                    </div>
                    <div class="code-block-body">
<pre><code><span class="code-keyword">using</span> System.Collections;
<span class="code-keyword">using</span> System.Collections.Generic;
<span class="code-keyword">using</span> UnityEngine;
<span class="code-keyword">using</span> Firebase;
<span class="code-keyword">using</span> Firebase.Auth;
<span class="code-keyword">using</span> Firebase.Firestore;
<span class="code-keyword">using</span> System.Threading.Tasks;
<span class="code-keyword">using</span> UnityEngine.UI;
<span class="code-keyword">using</span> Firebase.Extensions;
<span class="code-keyword">using</span> System;
<span class="code-keyword">using</span> System.Linq;

[<span class="code-attribute">FirestoreData</span>]
<span class="code-keyword">public class</span> <span class="code-type">UserInfo</span>
{
    [<span class="code-attribute">FirestoreProperty</span>]
    <span class="code-keyword">public string</span> name { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }
    [<span class="code-attribute">FirestoreProperty</span>]
    <span class="code-keyword">public int</span> points { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }
    [<span class="code-attribute">FirestoreProperty</span>]
    <span class="code-keyword">public int</span> prefecture { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }
    [<span class="code-attribute">FirestoreProperty</span>]
    <span class="code-keyword">public int</span> score { <span class="code-keyword">get</span>; <span class="code-keyword">set</span>; }
}

<span class="code-keyword">public class</span> <span class="code-type">AuthenticationManager</span> : <span class="code-type">MonoBehaviour</span>
{
    <span class="code-keyword">public static</span> <span class="code-type">AuthenticationManager</span> instance;

    <span class="code-keyword">public</span> <span class="code-type">FirebaseAuth</span> auth;
    <span class="code-keyword">public</span> <span class="code-type">FirebaseFirestore</span> firestore;

    <span class="code-keyword">public</span> <span class="code-type">UserInfo</span> CurrentUserInfo { <span class="code-keyword">get</span>; <span class="code-keyword">private set</span>; }
    <span class="code-keyword">public string</span> userID =&gt; user?.UserId;
    <span class="code-keyword">public string</span> userName =&gt; CurrentUserInfo?.name;

    <span class="code-keyword">public</span> <span class="code-type">FirebaseUser</span> user { <span class="code-keyword">get</span>; <span class="code-keyword">private set</span>; }

    <span class="code-keyword">void</span> <span class="code-method">Awake</span>()
    {
        <span class="code-keyword">if</span> (instance == <span class="code-keyword">null</span>)
        {
            instance = <span class="code-keyword">this</span>;
            <span class="code-method">DontDestroyOnLoad</span>(<span class="code-keyword">this</span>.gameObject);
            <span class="code-method">InitializeFirebase</span>();
        }
        <span class="code-keyword">else</span>
        {
            <span class="code-method">Destroy</span>(<span class="code-keyword">this</span>.gameObject);
        }
    }

    <span class="code-keyword">private void</span> <span class="code-method">InitializeFirebase</span>()
    {
        <span class="code-type">FirebaseApp</span>.<span class="code-method">CheckAndFixDependenciesAsync</span>().<span class="code-method">ContinueWithOnMainThread</span>(task =&gt;
        {
            <span class="code-keyword">if</span> (task.Result == <span class="code-type">DependencyStatus</span>.Available)
            {
                <span class="code-method">Debug.Log</span>(<span class="code-string">"Firebase is ready."</span>);
                <span class="code-type">FirebaseApp</span> app = <span class="code-type">FirebaseApp</span>.DefaultInstance;
                firestore = <span class="code-type">FirebaseFirestore</span>.DefaultInstance;
                auth = <span class="code-type">FirebaseAuth</span>.DefaultInstance;

                <span class="code-keyword">if</span> (auth.CurrentUser != <span class="code-keyword">null</span>)
                {
                    user = auth.CurrentUser;
                    <span class="code-method">Debug.Log</span>(<span class="code-string">$"æ—¢å­˜ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å†åˆ©ç”¨ã—ã¾ã™ã€‚ UserID: {user.UserId}"</span>);
                    <span class="code-method">FetchCurrentUserInfoAsync</span>();
                }
            }
            <span class="code-keyword">else</span>
            {
                <span class="code-method">Debug.LogError</span>(<span class="code-string">$"Could not resolve all Firebase dependencies: {task.Result}"</span>);
            }
        });
    }

    <span class="code-keyword">public void</span> <span class="code-method">ClearLoginState</span>()
    {
        user = <span class="code-keyword">null</span>;
        CurrentUserInfo = <span class="code-keyword">null</span>;
        <span class="code-method">Debug.Log</span>(<span class="code-string">"AuthenticationManagerã®ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸã€‚"</span>);
    }

    <span class="code-keyword">public async Task&lt;UserInfo&gt;</span> <span class="code-method">FetchCurrentUserInfoAsync</span>()
    {
        <span class="code-keyword">if</span> (auth.CurrentUser == <span class="code-keyword">null</span> || firestore == <span class="code-keyword">null</span>) { <span class="code-keyword">return null</span>; }
        <span class="code-keyword">string</span> uid = auth.CurrentUser.UserId;
        <span class="code-type">DocumentReference</span> docRef = firestore.Collection(<span class="code-string">"userInfo"</span>).<span class="code-method">Document</span>(uid);
        <span class="code-keyword">try</span>
        {
            <span class="code-type">DocumentSnapshot</span> snapshot = <span class="code-keyword">await</span> docRef.<span class="code-method">GetSnapshotAsync</span>();
            <span class="code-keyword">if</span> (snapshot.Exists)
            {
                CurrentUserInfo = snapshot.<span class="code-method">ConvertTo&lt;UserInfo&gt;</span>();
                <span class="code-method">Debug.Log</span>(<span class="code-string">$"ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã—ã¾ã—ãŸ: {CurrentUserInfo.name}"</span>);
                <span class="code-keyword">return</span> CurrentUserInfo;
            }
            <span class="code-keyword">else</span>
            {
                <span class="code-method">Debug.LogWarning</span>(<span class="code-string">$"Firestoreã«ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚UID: {uid}"</span>);
                <span class="code-keyword">return null</span>;
            }
        }
        <span class="code-keyword">catch</span> (<span class="code-type">Exception</span> ex)
        {
            <span class="code-method">Debug.LogError</span>(<span class="code-string">"ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾—ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: "</span> + ex);
            <span class="code-keyword">return null</span>;
        }
    }

    <span class="code-keyword">public async Task</span> <span class="code-method">SignUpAsync</span>(<span class="code-keyword">string</span> email, <span class="code-keyword">string</span> password, <span class="code-keyword">string</span> name, <span class="code-keyword">int</span> prefectureNumber)
    {
        <span class="code-keyword">if</span> (<span class="code-keyword">string</span>.<span class="code-method">IsNullOrEmpty</span>(email) || <span class="code-keyword">string</span>.<span class="code-method">IsNullOrEmpty</span>(password) || <span class="code-keyword">string</span>.<span class="code-method">IsNullOrEmpty</span>(name) || prefectureNumber == <span class="code-number">0</span>)
        {
            <span class="code-method">Debug.LogWarning</span>(<span class="code-string">"ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"</span>);
            <span class="code-keyword">throw new</span> <span class="code-type">System.ArgumentException</span>(<span class="code-string">"å…¥åŠ›ãŒä¸ååˆ†ã§ã™ã€‚"</span>);
        }
        <span class="code-keyword">try</span>
        {
            <span class="code-type">AuthResult</span> authResult = <span class="code-keyword">await</span> auth.<span class="code-method">CreateUserWithEmailAndPasswordAsync</span>(email, password);
            user = authResult.User;
            <span class="code-keyword">string</span> uid = user.UserId;
            <span class="code-type">UserInfo</span> newUserInfo = <span class="code-keyword">new</span> <span class="code-type">UserInfo</span>
            {
                name = name,
                prefecture = prefectureNumber,
                score = <span class="code-number">0</span>,
                points = <span class="code-number">0</span>
            };
            <span class="code-keyword">await</span> firestore.Collection(<span class="code-string">"userInfo"</span>).<span class="code-method">Document</span>(uid).<span class="code-method">SetAsync</span>(newUserInfo);
            <span class="code-method">Debug.Log</span>(<span class="code-string">"Firestoreã«ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’ç™»éŒ²ã—ã¾ã—ãŸã€‚"</span>);
        }
        <span class="code-keyword">catch</span> (<span class="code-type">System.Exception</span> ex)
        {
            <span class="code-method">Debug.LogError</span>(<span class="code-string">"SignUpAsync encountered an error: "</span> + ex);
            <span class="code-keyword">throw</span>;
        }
    }

    <span class="code-keyword">public void</span> <span class="code-method">UserLogin</span>(<span class="code-keyword">string</span> email, <span class="code-keyword">string</span> password, <span class="code-type">System.Action</span>&lt;<span class="code-keyword">bool</span>&gt; callback)
    {
        <span class="code-keyword">if</span> (auth == <span class="code-keyword">null</span>)
        {
            <span class="code-method">Debug.LogError</span>(<span class="code-string">"FirebaseAuth is not initialized."</span>);
            callback?.<span class="code-method">Invoke</span>(<span class="code-keyword">false</span>);
            <span class="code-keyword">return</span>;
        }
        auth.<span class="code-method">SignInWithEmailAndPasswordAsync</span>(email, password).<span class="code-method">ContinueWithOnMainThread</span>(authTask =&gt;
        {
            <span class="code-keyword">if</span> (authTask.IsCanceled || authTask.IsFaulted)
            {
                <span class="code-method">Debug.LogWarning</span>(<span class="code-string">"Login failed: "</span> + authTask.Exception);
                callback?.<span class="code-method">Invoke</span>(<span class="code-keyword">false</span>);
                <span class="code-keyword">return</span>;
            }
            user = authTask.Result.User;
            <span class="code-method">Debug.Log</span>(<span class="code-string">"Login successful. UID: "</span> + user.UserId);
            <span class="code-method">FetchCurrentUserInfoAsync</span>().<span class="code-method">ContinueWithOnMainThread</span>(fetchTask =&gt;
            {
                <span class="code-keyword">if</span> (fetchTask.IsCanceled || fetchTask.IsFaulted)
                {
                    <span class="code-method">Debug.LogError</span>(<span class="code-string">"Login succeeded, but failed to fetch user info: "</span> + fetchTask.Exception);
                    callback?.<span class="code-method">Invoke</span>(<span class="code-keyword">false</span>);
                    <span class="code-keyword">return</span>;
                }
                <span class="code-method">Debug.Log</span>(<span class="code-string">"Successfully fetched user info."</span>);
                callback?.<span class="code-method">Invoke</span>(<span class="code-keyword">true</span>);
            });
        });
    }

    <span class="code-keyword">public async Task</span> <span class="code-method">AddUserPointsAsync</span>(<span class="code-keyword">int</span> pointsToAdd)
    {
        <span class="code-keyword">if</span> (auth.CurrentUser == <span class="code-keyword">null</span> || firestore == <span class="code-keyword">null</span>) <span class="code-keyword">return</span>;
        <span class="code-keyword">string</span> uid = auth.CurrentUser.UserId;
        <span class="code-type">DocumentReference</span> docRef = firestore.Collection(<span class="code-string">"userInfo"</span>).<span class="code-method">Document</span>(uid);
        <span class="code-type">Dictionary&lt;string, object&gt;</span> updates = <span class="code-keyword">new</span> <span class="code-type">Dictionary&lt;string, object&gt;</span>
        { { <span class="code-string">"points"</span>, <span class="code-type">FieldValue</span>.<span class="code-method">Increment</span>(pointsToAdd) } };
        <span class="code-keyword">try</span>
        {
            <span class="code-keyword">await</span> docRef.<span class="code-method">UpdateAsync</span>(updates);
            <span class="code-method">Debug.Log</span>(<span class="code-string">$"ãƒ¦ãƒ¼ã‚¶ãƒ¼(UID: {uid})ã« {pointsToAdd} ãƒã‚¤ãƒ³ãƒˆåŠ ç®—ã—ã¾ã—ãŸã€‚"</span>);
        }
        <span class="code-keyword">catch</span> (<span class="code-type">Exception</span> ex)
        {
            <span class="code-method">Debug.LogError</span>(<span class="code-string">$"ãƒã‚¤ãƒ³ãƒˆã®åŠ ç®—ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {ex}"</span>);
            <span class="code-keyword">throw</span>;
        }
    }

    <span class="code-keyword">public async Task</span> <span class="code-method">AddUserScoreAsync</span>(<span class="code-keyword">int</span> scoreToAdd)
    {
        <span class="code-keyword">if</span> (auth.CurrentUser == <span class="code-keyword">null</span> || firestore == <span class="code-keyword">null</span>) <span class="code-keyword">return</span>;
        <span class="code-keyword">string</span> uid = auth.CurrentUser.UserId;
        <span class="code-type">DocumentReference</span> docRef = firestore.Collection(<span class="code-string">"userInfo"</span>).<span class="code-method">Document</span>(uid);
        <span class="code-type">Dictionary&lt;string, object&gt;</span> updates = <span class="code-keyword">new</span> <span class="code-type">Dictionary&lt;string, object&gt;</span>
        { { <span class="code-string">"score"</span>, <span class="code-type">FieldValue</span>.<span class="code-method">Increment</span>(scoreToAdd) } };
        <span class="code-keyword">try</span>
        {
            <span class="code-keyword">await</span> docRef.<span class="code-method">UpdateAsync</span>(updates);
            <span class="code-method">Debug.Log</span>(<span class="code-string">$"ãƒ¦ãƒ¼ã‚¶ãƒ¼(UID: {uid})ã« {scoreToAdd} ã‚¹ã‚³ã‚¢åŠ ç®—ã—ã¾ã—ãŸã€‚"</span>);
        }
        <span class="code-keyword">catch</span> (<span class="code-type">Exception</span> ex)
        {
            <span class="code-method">Debug.LogError</span>(<span class="code-string">$"ã‚¹ã‚³ã‚¢ã®åŠ ç®—ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {ex}"</span>);
            <span class="code-keyword">throw</span>;
        }
    }
}</code></pre>
                    </div>
                    <div class="code-explanation">
                        <p> (ä¸€éƒ¨æŠœç²‹) </p>
                        <br>
                        <h3>è§£èª¬</h3>
                        <p>
                            <span class="code-inline">AuthenticationManager</span> ã¯ã€Firebaseã‚’ä½¿ç”¨ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã¨ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚’ä¸€å…ƒçš„ã«è¡Œã†ã‚³ã‚¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚
                            ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿè£…ã—ã¦ãŠã‚Šã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§å”¯ä¸€ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚
                            æ–°è¦ç™»éŒ² (<span class="code-inline">SignUpAsync</span>) ã€ãƒ­ã‚°ã‚¤ãƒ³ (<span class="code-inline">UserLogin</span>) ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾— (<span class="code-inline">FetchCurrentUserInfoAsync</span>) ãªã©ã®ä¸»è¦ãªèªè¨¼æ©Ÿèƒ½ã‚’å‚™ãˆã¦ã„ã¾ã™ã€‚
                        </p>
                        <p>
                            <span class="code-inline">AddUserPointsAsync</span> ã¨ <span class="code-inline">AddUserScoreAsync</span> ãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯ã€
                            ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’å®Œäº†ã—ãŸã¨ãã‚„ã‚²ãƒ¼ãƒ å†…ã®æ“ä½œã‚’ã—ãŸã¨ãã«ã€Firestoreã®ãƒ‡ãƒ¼ã‚¿ã‚’åŸå­æ€§ (Atomicity) ã‚’å®ˆã‚ŠãªãŒã‚‰æ›´æ–°ã—ã¾ã™ã€‚
                        </p>
                        <div class="code-highlights">
                            <div class="code-highlight-item">
                                <span class="highlight-icon">ğŸ’¡</span>
                                <span class="highlight-text"><strong>ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³å®Ÿè£…: </strong><span class="code-inline">DontDestroyOnLoad</span> ã‚’ä½¿ç”¨ã—ã¦ã€ã‚·ãƒ¼ãƒ³é·ç§»æ™‚ã‚‚ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä¿æŒã—ã€ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ã‚’ç¶­æŒã—ã¾ã—ãŸã€‚</span>
                            </div>
                            <div class="code-highlight-item">
                                <span class="highlight-icon">âš™ï¸</span>
                                <span class="highlight-text"><strong>éåŒæœŸå‡¦ç†ã®æ´»ç”¨: </strong>ã»ã¼ã™ã¹ã¦ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ <span class="code-inline">async/await</span> ãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿè£…ã—ã€UI ã®ãƒ•ãƒªãƒ¼ã‚ºã‚’é˜²ããªãŒã‚‰ã‚¹ãƒ ãƒ¼ã‚ºãªãƒ‡ãƒ¼ã‚¿å–å¾—ã‚’å®Ÿç¾ã—ã¾ã—ãŸã€‚</span>
                            </div>
                            <div class="code-highlight-item">
                                <span class="highlight-icon">ğŸ”</span>
                                <span class="highlight-text"><strong>Firebase Authentication ã®çµ±åˆ: </strong>ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®èªè¨¼ã‚’å®Ÿè£…ã—ã€å®‰å…¨ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚’å®Ÿç¾ã—ã¾ã—ãŸã€‚</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ 2 -->
                <div class="code-block-wrapper">
                    <div class="code-block-header" onclick="toggleCodeBlock(event)">
                        <div class="code-block-toggle">
                            <span class="code-toggle-icon">â–¼</span>
                            <span class="filename">LoginUI.cs</span>
                        </div>
                        <span class="language-badge">C#</span>
                    </div>
                    <div class="code-block-body">
<pre><code><span class="code-keyword">using</span> UnityEngine;
<span class="code-keyword">using</span> UnityEngine.UI;
<span class="code-keyword">using</span> UnityEngine.SceneManagement;
<span class="code-keyword">using</span> TMPro;

<span class="code-keyword">public class</span> <span class="code-type">LoginUI</span> : <span class="code-type">MonoBehaviour</span>
{
    [<span class="code-attribute">Header</span>(<span class="code-string">"Register UI Components"</span>)]
    [<span class="code-attribute">SerializeField</span>] <span class="code-keyword">private</span> <span class="code-type">TMP_InputField</span> emailRegisterInput;
    [<span class="code-attribute">SerializeField</span>] <span class="code-keyword">private</span> <span class="code-type">TMP_InputField</span> passwordRegisterInput;
    [<span class="code-attribute">SerializeField</span>] <span class="code-keyword">private</span> <span class="code-type">TMP_InputField</span> nameRegisterInput;
    [<span class="code-attribute">SerializeField</span>] <span class="code-keyword">private</span> <span class="code-type">TMP_Dropdown</span> prefectureRegisterSelected;
    [<span class="code-attribute">SerializeField</span>] <span class="code-keyword">private</span> <span class="code-type">Button</span> registerButton;
    [<span class="code-attribute">SerializeField</span>] <span class="code-keyword">private</span> <span class="code-type">TMP_Text</span> registerErrorText;

    [<span class="code-attribute">Header</span>(<span class="code-string">"Login UI Components"</span>)]
    [<span class="code-attribute">SerializeField</span>] <span class="code-keyword">private</span> <span class="code-type">TMP_InputField</span> emailLoginInput;
    [<span class="code-attribute">SerializeField</span>] <span class="code-keyword">private</span> <span class="code-type">TMP_InputField</span> passwordLoginInput;
    [<span class="code-attribute">SerializeField</span>] <span class="code-keyword">private</span> <span class="code-type">Button</span> loginButton;
    [<span class="code-attribute">SerializeField</span>] <span class="code-keyword">private</span> <span class="code-type">TMP_Text</span> loginErrorText;

    [<span class="code-attribute">Header</span>(<span class="code-string">"Navigation Buttons"</span>)]
    [<span class="code-attribute">SerializeField</span>] <span class="code-keyword">private</span> <span class="code-type">Button</span> changeToLoginButton;
    [<span class="code-attribute">SerializeField</span>] <span class="code-keyword">private</span> <span class="code-type">Button</span> changeToRegisterButton;

    [<span class="code-attribute">Header</span>(<span class="code-string">"UI Panels"</span>)]
    [<span class="code-attribute">SerializeField</span>] <span class="code-keyword">private</span> <span class="code-type">GameObject</span> loginPanel;
    [<span class="code-attribute">SerializeField</span>] <span class="code-keyword">private</span> <span class="code-type">GameObject</span> registerPanel;

    <span class="code-keyword">void</span> <span class="code-method">Awake</span>()
    {
        <span class="code-method">SetupReferences</span>();
    }

    <span class="code-keyword">void</span> <span class="code-method">Start</span>()
    {
        <span class="code-comment">// ãƒ‘ãƒãƒ«ã®åˆæœŸçŠ¶æ…‹ã‚’è¨­å®š</span>
        <span class="code-keyword">if</span> (loginPanel != <span class="code-keyword">null</span>) loginPanel.<span class="code-method">SetActive</span>(<span class="code-keyword">true</span>);
        <span class="code-keyword">if</span> (registerPanel != <span class="code-keyword">null</span>) registerPanel.<span class="code-method">SetActive</span>(<span class="code-keyword">false</span>);

        <span class="code-comment">// ã‚¨ãƒ©ãƒ¼ãƒ†ã‚­ã‚¹ãƒˆã®åˆæœŸè¨­å®š</span>
        <span class="code-keyword">if</span> (registerErrorText != <span class="code-keyword">null</span>)
        {
            registerErrorText.text = <span class="code-string">"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆã®\nå¤§æ–‡å­—ã€å°æ–‡å­—ã€æ•°å­—ã‚’å«ã¿ã€\n8æ–‡å­—ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚"</span>;
            registerErrorText.color = Color.red;
        }

        <span class="code-keyword">if</span> (registerButton != <span class="code-keyword">null</span>) registerButton.onClick.<span class="code-method">AddListener</span>(OnRegisterButtonClicked);
        <span class="code-keyword">if</span> (loginButton != <span class="code-keyword">null</span>) loginButton.onClick.<span class="code-method">AddListener</span>(OnLoginButtonClicked);
        <span class="code-keyword">if</span> (changeToLoginButton != <span class="code-keyword">null</span>) changeToLoginButton.onClick.<span class="code-method">AddListener</span>(ToLoginPanel);
        <span class="code-keyword">if</span> (changeToRegisterButton != <span class="code-keyword">null</span>) changeToRegisterButton.onClick.<span class="code-method">AddListener</span>(ToResisiterPanel);
    }

    <span class="code-keyword">private void</span> <span class="code-method">SetupReferences</span>()
    {
        loginPanel = <span class="code-type">GameObject</span>.<span class="code-method">Find</span>(<span class="code-string">"LoginPanel"</span>).gameObject;
        registerPanel = <span class="code-type">GameObject</span>.<span class="code-method">Find</span>(<span class="code-string">"SignUpPanel"</span>).gameObject;

        <span class="code-comment">// ãƒ­ã‚°ã‚¤ãƒ³é–¢é€£UIã®å–å¾—</span>
        <span class="code-keyword">if</span> (loginPanel != <span class="code-keyword">null</span>)
        {
            emailLoginInput = loginPanel.transform.<span class="code-method">Find</span>(<span class="code-string">"EmailInputField"</span>).<span class="code-method">GetComponent</span>&lt;<span class="code-type">TMP_InputField</span>&gt;();
            passwordLoginInput = loginPanel.transform.<span class="code-method">Find</span>(<span class="code-string">"PasswordInputField"</span>).<span class="code-method">GetComponent</span>&lt;<span class="code-type">TMP_InputField</span>&gt;();
            loginButton = loginPanel.transform.<span class="code-method">Find</span>(<span class="code-string">"LoginSubmit"</span>).<span class="code-method">GetComponent</span>&lt;<span class="code-type">Button</span>&gt;();
            loginErrorText = loginPanel.transform.<span class="code-method">Find</span>(<span class="code-string">"TextForLoginError"</span>).<span class="code-method">GetComponent</span>&lt;<span class="code-type">TMP_Text</span>&gt;();
            changeToRegisterButton = loginPanel.transform.<span class="code-method">Find</span>(<span class="code-string">"ChangeResisterBtn"</span>).<span class="code-method">GetComponent</span>&lt;<span class="code-type">Button</span>&gt;();
        }
        <span class="code-keyword">else</span>
        {
            <span class="code-method">Debug.LogError</span>(<span class="code-string">"LoginPanelãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ï¼"</span>);
        }

        <span class="code-comment">// æ–°è¦ç™»éŒ²é–¢é€£UIã®å–å¾—</span>
        <span class="code-keyword">if</span> (registerPanel != <span class="code-keyword">null</span>)
        {
            emailRegisterInput = registerPanel.transform.<span class="code-method">Find</span>(<span class="code-string">"EmailInputField"</span>).<span class="code-method">GetComponent</span>&lt;<span class="code-type">TMP_InputField</span>&gt;();
            passwordRegisterInput = registerPanel.transform.<span class="code-method">Find</span>(<span class="code-string">"PasswordInputField"</span>).<span class="code-method">GetComponent</span>&lt;<span class="code-type">TMP_InputField</span>&gt;();
            nameRegisterInput = registerPanel.transform.<span class="code-method">Find</span>(<span class="code-string">"NameInputField"</span>).<span class="code-method">GetComponent</span>&lt;<span class="code-type">TMP_InputField</span>&gt;();
            prefectureRegisterSelected = registerPanel.transform.<span class="code-method">Find</span>(<span class="code-string">"SelectPrefecture"</span>).<span class="code-method">GetComponent</span>&lt;<span class="code-type">TMP_Dropdown</span>&gt;();
            registerButton = registerPanel.transform.<span class="code-method">Find</span>(<span class="code-string">"SignUpSubmit"</span>).<span class="code-method">GetComponent</span>&lt;<span class="code-type">Button</span>&gt;();
            registerErrorText = registerPanel.transform.<span class="code-method">Find</span>(<span class="code-string">"TextForRegisterError"</span>).<span class="code-method">GetComponent</span>&lt;<span class="code-type">TMP_Text</span>&gt;();
            changeToLoginButton = registerPanel.transform.<span class="code-method">Find</span>(<span class="code-string">"ChangeLoginBtn"</span>).<span class="code-method">GetComponent</span>&lt;<span class="code-type">Button</span>&gt;();
        }
        <span class="code-keyword">else</span>
        {
            <span class="code-method">Debug.LogError</span>(<span class="code-string">"RegisterPanel (SignUpPanel)ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ï¼"</span>);
        }
    }

    <span class="code-keyword">public async void</span> <span class="code-method">OnRegisterButtonClicked</span>()
    {
        registerErrorText.text = <span class="code-string">""</span>; <span class="code-comment">// ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒªã‚»ãƒƒãƒˆ</span>
        <span class="code-method">Debug.Log</span>(<span class="code-string">"ç™»éŒ²ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸã€‚"</span>);

        <span class="code-keyword">try</span>
        {
            <span class="code-keyword">await</span> <span class="code-type">AuthenticationManager</span>.instance.<span class="code-method">SignUpAsync</span>(
                emailRegisterInput.text,
                passwordRegisterInput.text,
                nameRegisterInput.text,
                prefectureRegisterSelected.value
            );
            <span class="code-method">Debug.Log</span>(<span class="code-string">"ç™»éŒ²ãŒå®Œäº†ã—ã¾ã—ãŸï¼"</span>);
            <span class="code-type">SceneManager</span>.<span class="code-method">LoadScene</span>(<span class="code-string">"TEST_MainGame"</span>);
        }
        <span class="code-keyword">catch</span> (<span class="code-type">System.Exception</span> ex)
        {
            <span class="code-method">Debug.LogError</span>(<span class="code-string">"ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ: "</span> + ex.Message);
            registerErrorText.color = Color.black;
            registerErrorText.text = <span class="code-string">"ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\nã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚"</span>;
        }
    }

    <span class="code-keyword">public void</span> <span class="code-method">OnLoginButtonClicked</span>()
    {
        loginErrorText.text = <span class="code-string">""</span>; <span class="code-comment">// ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒªã‚»ãƒƒãƒˆ</span>
        <span class="code-type">AuthenticationManager</span>.instance.<span class="code-method">UserLogin</span>(emailLoginInput.text, passwordLoginInput.text, success =&gt;
        {
            <span class="code-keyword">if</span> (success)
            {
                <span class="code-method">Debug.Log</span>(<span class="code-string">"ãƒ­ã‚°ã‚¤ãƒ³å®Œäº†ï¼ãƒ¡ã‚¤ãƒ³ã‚·ãƒ¼ãƒ³ã¸ã€‚"</span>);
                <span class="code-type">SceneManager</span>.<span class="code-method">LoadScene</span>(<span class="code-string">"TEST_MainGame"</span>); <span class="code-comment">// ãƒ¡ã‚¤ãƒ³ã‚·ãƒ¼ãƒ³èª­ã¿è¾¼ã¿</span>
            }
            <span class="code-keyword">else</span>
            {
                loginErrorText.text = <span class="code-string">"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€\nãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ã©ã¡ã‚‰ã‹ã€\nã¾ãŸã¯ä¸¡æ–¹ãŒé–“é•ã£ã¦ã„ã¾ã™ã€‚"</span>;
            }
        });
    }

    <span class="code-keyword">public void</span> <span class="code-method">ToResisiterPanel</span>() <span class="code-comment">// ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‹ã‚‰ç™»éŒ²ç”»é¢ã¸ã®é·ç§»</span>
    {
        loginPanel.<span class="code-method">SetActive</span>(<span class="code-keyword">false</span>);
        registerPanel.<span class="code-method">SetActive</span>(<span class="code-keyword">true</span>);
    }

    <span class="code-keyword">public void</span> <span class="code-method">ToLoginPanel</span>() <span class="code-comment">// ç™»éŒ²ç”»é¢ã‹ã‚‰ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã¸ã®é·ç§»</span>
    {
        loginPanel.<span class="code-method">SetActive</span>(<span class="code-keyword">true</span>);
        registerPanel.<span class="code-method">SetActive</span>(<span class="code-keyword">false</span>);
    }

    <span class="code-keyword">void</span> <span class="code-method">OnDestroy</span>()
    {
        <span class="code-keyword">if</span> (registerButton != <span class="code-keyword">null</span>) registerButton.onClick.<span class="code-method">RemoveListener</span>(OnRegisterButtonClicked);
        <span class="code-keyword">if</span> (loginButton != <span class="code-keyword">null</span>) loginButton.onClick.<span class="code-method">RemoveListener</span>(OnLoginButtonClicked);
        <span class="code-keyword">if</span> (changeToLoginButton != <span class="code-keyword">null</span>) changeToLoginButton.onClick.<span class="code-method">RemoveListener</span>(ToLoginPanel);
        <span class="code-keyword">if</span> (changeToRegisterButton != <span class="code-keyword">null</span>) changeToRegisterButton.onClick.<span class="code-method">RemoveListener</span>(ToResisiterPanel);
    }
}</code></pre>
                    </div>
                    <div class="code-explanation">
                        <h3>è§£èª¬</h3>
                        <p>
                            <span class="code-inline">LoginUI</span> ã¯ã€ãƒ­ã‚°ã‚¤ãƒ³ãƒ»æ–°è¦ç™»éŒ²ç”»é¢ã®UIãƒ­ã‚¸ãƒƒã‚¯ã‚’ç®¡ç†ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚
                            ãƒ­ã‚°ã‚¤ãƒ³ãƒ‘ãƒãƒ«ã¨ç™»éŒ²ãƒ‘ãƒãƒ«ã®è¡¨ç¤ºåˆ‡æ›¿ã€å„ç¨®å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ç®¡ç†ã€ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†ã‚’æ‹…å½“ã—ã¦ã„ã¾ã™ã€‚
                        </p>
                        <p>
                            <span class="code-inline">SetupReferences</span> ãƒ¡ã‚½ãƒƒãƒ‰ã§ã€ã‚·ãƒ¼ãƒ³å†…ã®UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‹•çš„ã«å–å¾—ã—ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆå†…ã§å‚ç…§ã«ã—ã¦ã„ã¾ã™ã€‚
                            <span class="code-inline">OnRegisterButtonClicked</span> ã¨ <span class="code-inline">OnLoginButtonClicked</span> ã¯ã€
                            ãã‚Œãã‚Œç™»éŒ²ãƒœã‚¿ãƒ³ã¨ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸæ™‚ã®å‡¦ç†ã‚’å®Ÿè¡Œã—ã€<span class="code-inline">AuthenticationManager</span> ã‚’å‘¼ã³å‡ºã—ã¦èªè¨¼ã‚’è¡Œã„ã¾ã™ã€‚
                            æˆåŠŸæ™‚ã¯ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ã‚·ãƒ¼ãƒ³ã¸é·ç§»ã—ã€å¤±æ•—æ™‚ã¯ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚
                        </p>
                        <div class="code-highlights">
                            <div class="code-highlight-item">
                                <span class="highlight-icon">ğŸ’¡</span>
                                <span class="highlight-text"><strong>å‹•çš„ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå–å¾—ï¼š</strong><span class="code-inline">GameObject.Find()</span> ã¨ <span class="code-inline">transform.Find()</span> ã‚’çµ„ã¿åˆã‚ã›ã¦ã€ã‚·ãƒ¼ãƒ³å†…ã®UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æŸ”è»Ÿã«å–å¾—ã—ã¾ã—ãŸã€‚</span>
                            </div>
                            <div class="code-highlight-item">
                                <span class="highlight-icon">ğŸ¨</span>
                                <span class="highlight-text"><strong>ãƒ‘ãƒãƒ«ã®åˆ‡æ›¿ç®¡ç†ï¼š</strong><span class="code-inline">SetActive()</span> ã‚’ä½¿ç”¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ç™»éŒ²ãƒ‘ãƒãƒ«ã‚’ç°¡æ½”ã«åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚</span>
                            </div>
                            <div class="code-highlight-item">
                                <span class="highlight-icon">âš¡</span>
                                <span class="highlight-text"><strong>éåŒæœŸç™»éŒ²å‡¦ç†ï¼š</strong><span class="code-inline">async/await</span> ã‚’ä½¿ç”¨ã—ã¦ã€Firebase ã¸ã®ç™»éŒ²ä¸­ã‚‚ UI ãŒåå¿œã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚</span>
                            </div>
                            <div class="code-highlight-item">
                                <span class="highlight-icon">ğŸ§¹</span>
                                <span class="highlight-text"><strong>ãƒ¡ãƒ¢ãƒªç®¡ç†ï¼š</strong><span class="code-inline">OnDestroy</span> ã§ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒªã‚¹ãƒŠãƒ¼ã‚’ç™»éŒ²è§£é™¤ã—ã€ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã‚’é˜²ãã¾ã—ãŸã€‚</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="detail-footer">
        <div class="container">
            <p>&copy; 2026 nonor102. All rights reserved.</p>
        </div>
    </footer>

    <script>
        function changeImage(thumb) {
            document.getElementById('mainImage').src = thumb.src;
            document.querySelectorAll('.gallery-thumbs img').forEach(img => img.classList.remove('active'));
            thumb.classList.add('active');
        }

        function toggleCodeBlock(event) {
            const header = event.currentTarget;
            const wrapper = header.closest('.code-block-wrapper');
            wrapper.classList.toggle('collapsed');
        }
    </script>
</body>
</html>
